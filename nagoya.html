<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💖 Our Ultimate Nagoya Diary 💖</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Patrick+Hand&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #FFF9F2;
            --text-main: #4A4A4A;
            --text-cute: #d63384;
            --day1-color: #FBCFE8; --day1-accent: #F472B6;
            --day2-color: #BFDBFE; --day2-accent: #60A5FA;
            --day3-color: #A7F3D0; --day3-accent: #34D399;
            --day4-color: #FDE68A; --day4-accent: #FBBF24;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-main); overflow: hidden; }
        .font-handwriting { font-family: 'Patrick Hand', cursive; }
        .font-korean-cute { font-family: 'Gaegu', cursive; font-weight: 700; }
        
        /* --- Envelope Animation Styles --- */
        #envelope-wrapper { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; background-color: #fce7f3; z-index: 100; cursor: pointer; transition: opacity 0.5s ease-out; }
        .envelope { position: relative; width: 300px; height: 200px; background-color: #fff; box-shadow: 0 4px 20px rgba(0,0,0,0.1); border-radius: 10px; }
        .envelope-flap { position: absolute; top: 0; left: 0; width: 100%; height: 100px; background-color: var(--day1-accent); clip-path: polygon(0 0, 100% 0, 50% 100%); border-top-left-radius: 10px; border-top-right-radius: 10px; transition: transform 0.5s ease-in-out; transform-origin: top; }
        .envelope-body { position: absolute; top: 100px; left: 0; width: 100%; height: 100px; background-color: #fff; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; }
        .envelope-seal { position: absolute; top: 85px; left: 50%; transform: translateX(-50%); width: 30px; height: 30px; background-color: #fce7f3; border-radius: 50%; color: var(--day1-accent); display: flex; justify-content: center; align-items: center; font-size: 1.2rem; }
        #envelope-wrapper.opened .envelope-flap { transform: rotateX(180deg); }
        #envelope-wrapper.opened { opacity: 0; pointer-events: none; }
        .diary-container { max-w-5xl mx-auto bg-white p-4 sm:p-6 md:p-8 shadow-xl; opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease-in 0.3s, transform 0.5s ease-in 0.3s; }
        body.unlocked { overflow: auto; }
        body.unlocked .diary-container { opacity: 1; transform: translateY(0); }

        /* --- Diary & Map Styles --- */
        .main-headline { font-size: 3rem; sm:font-size: 4rem; md:font-size: 5rem; line-height: 1; text-align: center; color: var(--text-cute); margin-bottom: 0.5rem; }
        .sub-headline { font-size: 1.25rem; color: #a1a1aa; margin-bottom: 2rem; }
        .diary-entry { border-top: 2px dashed #e5e5e5; padding-top: 2rem; margin-top: 2rem; position: relative; }
        .entry-title { font-size: 2.5rem; md:font-size: 3rem; margin-bottom: 1.5rem; }
        .timeline-item { display: flex; gap: 1rem; margin-bottom: 2rem; }
        .timeline-time { flex-shrink: 0; width: 4.5rem; font-size: 1.5rem; text-align: right; }
        .timeline-content { border-left: 3px dotted #d4d4d8; padding-left: 1.5rem; width: 100%; }
        .timeline-title { font-size: 1.5rem; }
        .shopping-detail { background: #fdf2f8; border-left: 4px solid var(--day1-accent); padding: 0.75rem; margin-top: 0.5rem; border-radius: 0.5rem; }
        .map-card { background: #fff; border-radius: 1rem; padding: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        .map-container { height: 400px; border-radius: 0.75rem; overflow: hidden; margin-top: 1rem; }
        .map-filters { display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; }
        .map-filter-btn { padding: 0.5rem 1rem; border-radius: 99px; cursor: pointer; transition: all 0.2s; border: 2px solid; }
        .meal-options { background-color: #f9fafb; border-radius: 0.75rem; padding: 1rem; margin-top: 1rem; }
        .meal-option { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .meal-option div { flex-grow: 1; }
        .meal-option strong { font-size: 1.1rem; }
        .map-pin { cursor: pointer; margin-left: 0.75rem; font-size: 1.5rem; transition: transform 0.2s; flex-shrink: 0; }
        .map-pin:hover { transform: scale(1.2); }
        .sticker { position: absolute; width: 80px; height: 80px; z-index: 10; user-select: none; }
    </style>
</head>
<body>
    
    <div id="envelope-wrapper">
        <div class="envelope">
            <div class="envelope-flap"></div>
            <div class="envelope-body"></div>
            <div class="envelope-seal">💖</div>
        </div>
        <p class="font-korean-cute absolute bottom-10 text-xl text-gray-500">Click to Open Our Trip Diary!</p>
    </div>

    <div id="diary-container" class="diary-container hidden">
        <header>
            <h1 class="font-handwriting main-headline">Our Nagoya Diary</h1>
            <p class="font-korean-cute sub-headline">July 3rd - 6th 💖 The Cutest Trip Ever!</p>
        </header>

        <section id="interactive-map-section" class="map-card">
            <h2 class="font-handwriting text-3xl text-center mb-4">✨ Our Adventure Map ✨</h2>
            <div id="map-filters" class="map-filters">
                <button onclick="filterMarkers('all')" class="map-filter-btn" style="background-color: #f3f4f6; border-color: #d1d5db; color: #4b5563;">All</button>
                <button onclick="filterMarkers('day1')" class="map-filter-btn" style="background-color: var(--day1-color); border-color: var(--day1-accent); color: var(--day1-accent);">Day 1 🚆</button>
                <button onclick="filterMarkers('day2')" class="map-filter-btn" style="background-color: var(--day2-color); border-color: var(--day2-accent); color: var(--day2-accent);">Day 2 🍖</button>
                <button onclick="filterMarkers('day3')" class="map-filter-btn" style="background-color: var(--day3-color); border-color: var(--day3-accent); color: var(--day3-accent);">Day 3 🍰</button>
                <button onclick="filterMarkers('day4')" class="map-filter-btn" style="background-color: var(--day4-color); border-color: var(--day4-accent); color: var(--day4-accent);">Day 4 ✈️</button>
            </div>
            <div id="map" class="map-container"></div>
        </section>

        <main>
            <!-- Day 1 -->
            <article class="diary-entry">
                <h2 class="entry-title" style="color: var(--day1-accent);">Day 1 (Thu): Hello, Nagoya! 💖</h2>
                <div class="timeline">
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day1-accent);">2 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">✈️ 호텔 직행</h3><p>주부 공항 → '뮤스카이' 특급(28분) → 나고야역 도착! '미쓰이 가든 호텔'에 체크인!</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day1-accent);">3 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🛍️ 나고야역 쇼핑 상세 가이드</h3>
                        <div class="shopping-detail"><p><strong>JR 다카시마야:</strong> 명품, 화장품, 의류가 모인 정통 백화점. 지하 식품관 '데파치카'는 고급 과자와 선물 사기에 최고!</p></div>
                        <div class="shopping-detail"><p><strong>도큐 핸즈:</strong> 창의력의 천국! 아기자기한 문구류, 최신 뷰티템, 독특한 생활 잡화까지 시간 가는 줄 모르는 곳.</p></div>
                    </div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day1-accent);">6:30 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍜 저녁 식사 @나고야역</h3><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day1-accent);">미소카츠</strong><p><strong>야바톤</strong> (ESCA). 나고야 메시의 대표주자!</p></div><span class="map-pin" onclick="goToPlace(35.1691, 136.8798, '야바톤 (ESCA)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day1-accent);">키시멘</strong><p><strong>요시다 키시멘</strong> (ESCA). 넓적하고 부드러운 면발!</p></div><span class="map-pin" onclick="goToPlace(35.1691, 136.88, '요시다 키시멘 (ESCA)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day1-accent);">텐무스</strong><p><strong>센쥬</strong> (다카시마야 B1). 새우튀김 주먹밥, 간식으로도 최고!</p></div><span class="map-pin" onclick="goToPlace(35.1709, 136.8835, '텐무스 센쥬 (다카시마야)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day1-accent);">안카케 스파게티</strong><p><strong>스파게티 하우스 요코이</strong> (JP타워). 걸쭉한 소스가 특징!</p></div><span class="map-pin" onclick="goToPlace(35.1725, 136.882, '스파게티 하우스 요코이')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day1-accent);">미소니코미 우동</strong><p><strong>야마모토야 소혼케</strong> (ESCA). 진한 된장 국물 우동!</p></div><span class="map-pin" onclick="goToPlace(35.1692, 136.8795, '야마모토야 소혼케 (ESCA)')">📍</span></div>
                    </div></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day1-accent);">8 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🌃 야경 & 편의점 탐방</h3><p>JR 센트럴 타워 15층 '스카이 스트리트' 야경 감상 후, 편의점에서 신기한 간식 득템!</p></div></div>
                </div>
            </article>

            <!-- Day 2 -->
             <article class="diary-entry">
                <h2 class="entry-title" style="color: var(--day2-accent);">Day 2 (Fri): Sakae Food & Fun! 👑</h2>
                <div class="timeline">
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">11 AM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">📝 웨이팅 작전!</h3><p>나고야역 → 사카에역 (지하철 5분). <strong>히츠마부시 하나오카</strong>에 가서 웨이팅 리스트부터 적기!</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">11:30 AM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🛍️ 사카에 쇼핑 상세 가이드</h3>
                         <div class="shopping-detail"><p><strong>사카에 지하상가:</strong> 모든 쇼핑몰로 이어지는 개미지옥! 아기자기한 옷가게와 잡화점이 많음.</p></div>
                         <div class="shopping-detail"><p><strong>마츠자카야 & 미츠코시:</strong> 정통 고급 백화점. 특히 마츠자카야 본관 5층 '포켓몬 센터'는 필수 코스!</p></div>
                         <div class="shopping-detail"><p><strong>파르코 (PARCO):</strong> 젊고 트렌디한 패션 브랜드, 캐릭터 굿즈, 음반 매장까지! 서브컬쳐의 성지.</p></div>
                         <div class="shopping-detail"><p><strong>로프트 (LOFT):</strong> 디자인 문구, 화장품, 인테리어 소품이 가득. 도큐핸즈와는 또 다른 매력!</p></div>
                    </div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">1 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍖 점심 식사 @사카에</h3><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">미소카츠</strong><p><strong>야바톤 본점</strong>. Vlog 성지! 치즈&파 추가 필수!</p></div><span class="map-pin" onclick="goToPlace(35.168, 136.907, '야바톤 본점')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">안카케 스파게티</strong><p><strong>스파게티 하우스 소레</strong>. 현지인 추천 맛집!</p></div><span class="map-pin" onclick="goToPlace(35.1675, 136.910, '스파게티 하우스 소레')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">미소니코미 우동</strong><p><strong>야마모토야 혼텐</strong>. 된장우동의 또 다른 명가!</p></div><span class="map-pin" onclick="goToPlace(35.169, 136.906, '야마모토야 혼텐')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">카페/브런치</strong><p><strong>코메다 커피</strong>. 명물 오구라 토스트 즐기기!</p></div><span class="map-pin" onclick="goToPlace(35.171, 136.912, '코메다 커피 사카에점')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">카레 우동</strong><p><strong>와카사치야</strong>. 크리미한 카레 우동 맛집!</p></div><span class="map-pin" onclick="goToPlace(35.1685, 136.910, '와카사치야')">📍</span></div>
                    </div></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">3 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍰 디저트 & 재충전 타임!</h3><p>백화점 '데파치카' 구경 후, 케이크 맛집에서 휴식.</p><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">크레이프 케이크</strong><p><strong>하브스 (HARBS) 본점</strong>. 말이 필요 없는 곳!</p></div><span class="map-pin" onclick="goToPlace(35.1698, 136.908, '하브스 (HARBS) 본점')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day2-accent);">3D 라떼아트</strong><p><strong>LIGHT CAFE</strong>. 귀여운 라떼아트로 유명!</p></div><span class="map-pin" onclick="goToPlace(35.1695, 136.9075, 'LIGHT CAFE 사카에점')">📍</span></div>
                    </div></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">6 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍚 저녁: 감동의 히츠마부시</h3><p>드디어 우리 차례! '하나오카'에서 인생 장어덮밥 먹기. 😭</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day2-accent);">8:30 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🌙 오아시스21 & 돈키호테</h3><p>'물의 우주선'에서 인생샷 찍고, '돈키호테'에서 면세 쇼핑으로 하루 마무리! 💸</p></div></div>
                </div>
            </article>

            <!-- Day 3 -->
            <article class="diary-entry">
                 <h2 class="entry-title" style="color: var(--day3-accent);">Day 3 (Sat): Osu's Cutest Finds! 🌸</h2>
                 <div class="timeline">
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day3-accent);">11 AM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🚇 오스 상점가로!</h3><p>나고야역 → 후시미역(환승) → 오스칸논역 (총 15분). '도니치에코킷푸(620엔)' 강추!</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day3-accent);">11:30 AM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">💎 오스 상점가 보물찾기 & 길거리 음식</h3><p>'수요일의 앨리스' 같은 소품샵과 함께 다양한 길거리 음식 맛보기!</p><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">가라아게</strong><p><strong>리&딘</strong>. 금상 수상에 빛나는 닭튀김!</p></div><span class="map-pin" onclick="goToPlace(35.159, 136.905, '리&딘')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">타이야키</strong><p><strong>긴노안</strong>. 팥, 커스터드 붕어빵!</p></div><span class="map-pin" onclick="goToPlace(35.158, 136.904, '긴노안')">📍</span></div>
                    </div></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day3-accent);">2 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🥐 빵집 & 카페 투어 @오스</h3><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">최고 빵집</strong><p><strong>Le Supreme</strong>. 빵 사서 근처 카페에서 즐기기!</p></div><span class="map-pin" onclick="goToPlace(35.1585, 136.908, 'Le Supreme')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">감성 카페</strong><p><strong>KANNON COFFEE</strong>. 귀여운 쿠키 커피!</p></div><span class="map-pin" onclick="goToPlace(35.158, 136.902, 'KANNON COFFEE')">📍</span></div>
                    </div></div></div>
                     <div class="timeline-item"><div class="timeline-time" style="color: var(--day3-accent);">7 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍻 저녁: 나고야의 밤 @사카에</h3><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">👑 MUST GO!</strong><p><strong>도쿄멘친테이 혼포</strong>. 꼭 가고 싶었던 아부라소바 맛집!</p></div><span class="map-pin" onclick="goToPlace(35.168, 136.9079, '도쿄멘친테이 혼포 니시키')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">테바사키</strong><p><strong>후라이보</strong> 또는 <strong>세카이노 야마짱</strong>. 두 원조 맛 비교!</p></div><span class="map-pin" onclick="goToPlace(35.168, 136.909, '후라이보 사카에점')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">대만 라멘</strong><p><strong>미센 야바점</strong>. 나고야 발상 매운 라멘!</p></div><span class="map-pin" onclick="goToPlace(35.163, 136.906, '미센 야바점')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">도테니</strong><p><strong>시마쇼</strong>. 된장 소스에 푹 끓인 소 힘줄 요리!</p></div><span class="map-pin" onclick="goToPlace(35.167, 136.908, '시마쇼')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day3-accent);">이자카야</strong><p><strong>이자카야 모모</strong>. Vlog 속 '미소 버터 콘 라멘'!</p></div><span class="map-pin" onclick="goToPlace(35.1678, 136.9095, '이자카야 모모')">📍</span></div>
                    </div></div></div>
                </div>
            </article>

            <!-- Day 4 -->
            <article class="diary-entry">
                <h2 class="entry-title" style="color: var(--day4-accent);">Day 4 (Sun): Last Haul & Fly Home! 👋</h2>
                <div class="timeline">
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day4-accent);">11 AM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🎁 마지막 쇼핑 @나고야역</h3><p>호텔 체크아웃 후 짐 맡기기! '메이테츠 백화점' 다이소 & '다카시마야 백화점' 지하에서 최종 쇼핑!</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day4-accent);">1 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">✈️ 공항으로</h3><p>호텔에서 짐 찾아서 바로 '뮤스카이' 타고 주부 국제공항으로!</p></div></div>
                    <div class="timeline-item"><div class="timeline-time" style="color: var(--day4-accent);">2 PM</div><div class="timeline-content"><h3 class="font-korean-cute timeline-title">🍗 공항에서 최종 식사</h3><div class="meal-options">
                        <div class="meal-option"><div><strong style="color: var(--day4-accent);">히츠마부시</strong><p><strong>마루야 혼텐</strong>. 공항에서 즐기는 마지막 장어덮밥!</p></div><span class="map-pin" onclick="goToPlace(34.8583, 136.8063, '마루야 혼텐 (공항)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day4-accent);">테바사키</strong><p><strong>세카이노 야마짱</strong>. 짭짤한 후추맛!</p></div><span class="map-pin" onclick="goToPlace(34.858, 136.806, '세카이노 야마짱 (공항)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day4-accent);">미소카츠</strong><p><strong>야바톤</strong>. 마지막 미소카츠!</p></div><span class="map-pin" onclick="goToPlace(34.8582, 136.8062, '야바톤 (공항)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day4-accent);">에비센베</strong><p><strong>에비센베노 사토</strong>. 새우과자 선물사기 최고!</p></div><span class="map-pin" onclick="goToPlace(34.857, 136.805, '에비센베노 사토 (공항)')">📍</span></div>
                        <div class="meal-option"><div><strong style="color: var(--day4-accent);">키시멘</strong><p><strong>미야 키시멘</strong>. 마지막 나고야 우동!</p></div><span class="map-pin" onclick="goToPlace(34.8575, 136.8055, '미야 키시멘 (공항)')">📍</span></div>
                    </div></div></div>
                </div>
            </article>
        </main>
        
        <footer class="text-center mt-8 pt-4 border-t-2 border-dashed border-gray-300">
            <p class="font-handwriting text-2xl" style="color: var(--text-cute);">Our Best Trip Ever! XOXO</p>
        </footer>
    </div>

<script>
// --- Envelope Animation ---
document.addEventListener('DOMContentLoaded', () => {
    const envelope = document.getElementById('envelope-wrapper');
    if (envelope) {
        envelope.addEventListener('click', () => {
            envelope.classList.add('opened');
            document.body.classList.add('unlocked');
            document.getElementById('diary-container').classList.remove('hidden');
        });
    }
    loadMapScript();
});


// --- Map Data & Functions ---
const apiKey = 'AIzaSyDqTonh0QOk0kA9WNCBgLyq6gyYpY4TrZU'; 
let map;
let allMarkers = [];
let infoWindow;

const locations = {
    day1: [
        { lat: 35.1706, lng: 136.8821, title: '💖 미쓰이 가든 호텔', icon: '🚆' },
        { lat: 35.1691, lng: 136.8798, title: '🍖 야바톤 (ESCA)', icon: '🚆' },
        { lat: 35.1691, lng: 136.88, title: '� 요시다 키시멘', icon: '🚆' },
        { lat: 35.1709, lng: 136.8835, title: '🍙 텐무스 센쥬', icon: '🚆' },
        { lat: 35.1725, lng: 136.882, title: '🍝 스파게티 하우스 요코이', icon: '🚆' },
        { lat: 35.1692, lng: 136.8795, title: '🍜 야마모토야 소혼케 (ESCA)', icon: '🚆' }
    ],
    day2: [
        { lat: 35.1687, lng: 136.909, title: '📝 히츠마부시 하나오카', icon: '🍖' },
        { lat: 35.168, lng: 136.907, title: '🍖 야바톤 본점', icon: '🍖' },
        { lat: 35.1675, lng: 136.910, title: '🍝 스파게티 하우스 소레', icon: '🍖' },
        { lat: 35.169, lng: 136.906, title: '🍜 야마모토야 혼텐', icon: '🍖' },
        { lat: 35.171, lng: 136.912, title: '☕️ 코메다 커피', icon: '🍖' },
        { lat: 35.1685, lng: 136.910, title: '🍛 와카사치야', icon: '🍖' },
        { lat: 35.1698, lng: 136.908, title: '🍰 하브스 (HARBS) 본점', icon: '🍖' },
        { lat: 35.1695, lng: 136.9075, title: '☕️ LIGHT CAFE', icon: '🍖' }
    ],
    day3: [
        { lat: 35.159, lng: 136.905, title: '🍗 리&딘 (가라아게)', icon: '🍰' },
        { lat: 35.158, lng: 136.904, title: '🐟 긴노안 (타이야키)', icon: '🍰' },
        { lat: 35.1585, lng: 136.908, title: '🥐 Le Supreme (빵집)', icon: '🍰' },
        { lat: 35.158, lng: 136.902, title: '☕️ KANNON COFFEE', icon: '🍰' },
        { lat: 35.168, lng: 136.9079, title: '👑 도쿄멘친테이 혼포 니시키', icon: '🍰' },
        { lat: 35.168, lng: 136.909, title: '🍗 후라이보 사카에점', icon: '🍰' },
        { lat: 35.163, lng: 136.906, title: '🍜 미센 야바점', icon: '🍰' },
        { lat: 35.167, lng: 136.908, title: '🍢 시마쇼 (도테니)', icon: '🍰' },
        { lat: 35.1678, lng: 136.9095, title: '🍻 이자카야 모모', icon: '🍰' }
    ],
    day4: [
        { lat: 34.8583, lng: 136.8063, title: '🍚 마루야 혼텐 (공항)', icon: '✈️' },
        { lat: 34.858, lng: 136.806, title: '🍗 세카이노 야마짱 (공항)', icon: '✈️' },
        { lat: 34.8582, lng: 136.8062, title: '🍖 야바톤 (공항)', icon: '✈️' },
        { lat: 34.857, lng: 136.805, title: '🦐 에비센베노 사토', icon: '✈️' },
        { lat: 34.8575, lng: 136.8055, title: '🍜 미야 키시멘 (공항)', icon: '✈️' }
    ]
};
const colors = { day1: 'F472B6', day2: '60A5FA', day3: '34D399', day4: 'FBBF24' };

async function initMap() {
    const { Map } = await google.maps.importLibrary("maps");
    const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary("marker");
    
    map = new Map(document.getElementById("map"), { zoom: 13, center: { lat: 35.17, lng: 136.9 }, mapId: 'DEMO_MAP_ID' });
    infoWindow = new google.maps.InfoWindow();

    for (const day in locations) {
        locations[day].forEach(loc => {
            const pin = new PinElement({ glyph: loc.icon, glyphColor: "white", background: `#${colors[day]}`, borderColor: "white" });
            const marker = new AdvancedMarkerElement({ map, position: loc, title: loc.title, content: pin.element, gmpDraggable: false });
            marker.day = day;
            marker.addListener('click', () => {
                infoWindow.setContent(loc.title);
                infoWindow.open(map, marker);
            });
            allMarkers.push(marker);
        });
    }
}

function filterMarkers(day) {
    if (!map) return;
    allMarkers.forEach(marker => { marker.map = (day === 'all' || marker.day === day) ? map : null; });
}

function goToPlace(lat, lng, title) {
    if (!map) return;
    const pos = { lat, lng };
    map.panTo(pos);
    map.setZoom(17);
    
    let targetMarker = null;
    allMarkers.forEach(marker => {
       if (marker.position.lat === lat && marker.position.lng === lng) {
           targetMarker = marker;
       }
    });

    if (targetMarker) {
        infoWindow.setContent(title);
        infoWindow.open(map, targetMarker);
    } else {
        infoWindow.setPosition(pos);
        infoWindow.setContent(title);
        infoWindow.open({ map, anchor: null });
    }
}

function loadMapScript() {
    if (!apiKey || apiKey === 'YOUR_GOOGLE_MAPS_API_KEY') {
        document.getElementById('map').innerHTML = `<div id="map-placeholder"><p class="font-korean-cute" style="font-size: 1.5rem; color: #d63384;">🗺️ 지도 로딩 실패! 🗺️</p><p class="font-korean-cute" style="margin-top: 1rem;">API 키를 확인해주세요.</p></div>`;
        return;
    }
    const script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap&libraries=maps,marker&v=beta`;
    script.async = true;
    document.head.appendChild(script);
}

</script>

</body>
</html>
